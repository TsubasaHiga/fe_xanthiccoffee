# æœŸé–“ãƒ—ãƒªã‚»ãƒƒãƒˆæ©Ÿèƒ½ å‹•ä½œç¢ºèªæ‰‹é †

## å®Ÿè£…å®Œäº†é …ç›® âœ…

### 1. ãƒ•ãƒƒã‚¯å´ã®æœ€é©åŒ– (useDateListGenerator.ts)
- âœ… å‹å®šç¾©ã®è¿½åŠ  (`PresetType`, `Preset`)
- âœ… å®šæ•°ã®æ•´ç† (`INITIAL_END_DATE`, `DEFAULT_HOLIDAY_COLOR`)
- âœ… ãƒ¡ãƒ¢åŒ–ã®å®Ÿè£… (`generateListDependencies`)
- âœ… é–¢æ•°ã®çµ±åˆãƒ»æœ€é©åŒ–

### 2. ãƒ—ãƒªã‚»ãƒƒãƒˆæ©Ÿèƒ½ã®ä»•æ§˜ä¿®æ­£
- âœ… **ã€Œé–‹å§‹æ—¥ã‹ã‚‰ã€é¸æŠæ™‚**: é–‹å§‹æ—¥å›ºå®šã€çµ‚äº†æ—¥ã‚’ãƒ—ãƒªã‚»ãƒƒãƒˆåˆ†å¤‰æ›´
- âœ… **ã€Œçµ‚äº†æ—¥ã‹ã‚‰ã€é¸æŠæ™‚**: çµ‚äº†æ—¥å›ºå®šã€é–‹å§‹æ—¥ã‚’ãƒ—ãƒªã‚»ãƒƒãƒˆåˆ†å¤‰æ›´
- âœ… ãƒ—ãƒªã‚»ãƒƒãƒˆæŠ¼ä¸‹æ™‚ã«ãã®ãƒ—ãƒªã‚»ãƒƒãƒˆã‚’ã‚«ãƒ¬ãƒ³ãƒˆè¡¨ç¤º

### 3. ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³å¯¾å¿œ
- âœ… `calculateDateFromPreset`é–¢æ•°ã‚’dayjsãƒ™ãƒ¼ã‚¹ã«å¤‰æ›´
- âœ… `new Date()`ã‹ã‚‰`dayjs()`ã«çµ±ä¸€ã—ã¦ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã®å½±éŸ¿ã‚’æ’é™¤

### 4. ãƒ†ã‚¹ãƒˆã®æ›´æ–°ãƒ»è¿½åŠ 
- âœ… `DateListSettingsContext.test.tsx`: æ–°ã—ã„APIå¯¾å¿œ
- âœ… `useDateListGenerator.test.ts`: dayjsã‚¤ãƒ³ãƒãƒ¼ãƒˆã€ãƒ†ã‚¹ãƒˆæ›´æ–°
- âœ… `DateListSettingsCard.test.tsx`: æ–°è¦ä½œæˆ
- âœ… E2Eãƒ†ã‚¹ãƒˆ: ãƒ—ãƒªã‚»ãƒƒãƒˆæ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹è¿½åŠ 

## æ‰‹å‹•ç¢ºèªæ‰‹é †

### 1. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³èµ·å‹•
```bash
cd markdays
pnpm run dev
```

### 2. ãƒ—ãƒªã‚»ãƒƒãƒˆæ©Ÿèƒ½ã®å‹•ä½œç¢ºèª

#### 2.1 ã€Œé–‹å§‹æ—¥ã‹ã‚‰ã€é¸æŠæ™‚ã®å‹•ä½œ
1. ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://localhost:5173 ã‚’é–‹ã
2. ã‚¿ã‚¤ãƒˆãƒ«ã€é–‹å§‹æ—¥ã€çµ‚äº†æ—¥ã‚’é©å½“ã«è¨­å®š
3. ãƒ—ãƒªã‚»ãƒƒãƒˆåŸºæº–ã‚»ãƒ¬ã‚¯ãƒˆã§ã€Œé–‹å§‹æ—¥ã‹ã‚‰ã€ã‚’é¸æŠ
4. ã€Œ7æ—¥é–“ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
   - **æœŸå¾…å€¤**: é–‹å§‹æ—¥ã¯å¤‰æ›´ã•ã‚Œãšã€çµ‚äº†æ—¥ãŒé–‹å§‹æ—¥+7æ—¥ã«ãªã‚‹
5. ã€Œ1ãƒ¶æœˆã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
   - **æœŸå¾…å€¤**: é–‹å§‹æ—¥ã¯å¤‰æ›´ã•ã‚Œãšã€çµ‚äº†æ—¥ãŒé–‹å§‹æ—¥+1ãƒ¶æœˆã«ãªã‚‹

#### 2.2 ã€Œçµ‚äº†æ—¥ã‹ã‚‰ã€é¸æŠæ™‚ã®å‹•ä½œ
1. ãƒ—ãƒªã‚»ãƒƒãƒˆåŸºæº–ã‚»ãƒ¬ã‚¯ãƒˆã§ã€Œçµ‚äº†æ—¥ã‹ã‚‰ã€ã‚’é¸æŠ
2. ã€Œ7æ—¥é–“ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
   - **æœŸå¾…å€¤**: çµ‚äº†æ—¥ã¯å¤‰æ›´ã•ã‚Œãšã€é–‹å§‹æ—¥ãŒçµ‚äº†æ—¥-7æ—¥ã«ãªã‚‹
3. ã€Œ1ãƒ¶æœˆã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
   - **æœŸå¾…å€¤**: çµ‚äº†æ—¥ã¯å¤‰æ›´ã•ã‚Œãšã€é–‹å§‹æ—¥ãŒçµ‚äº†æ—¥-1ãƒ¶æœˆã«ãªã‚‹

#### 2.3 ãƒ—ãƒªã‚»ãƒƒãƒˆçŠ¶æ…‹ã®è¡¨ç¤ºç¢ºèª
1. ä»»æ„ã®ãƒ—ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
   - **æœŸå¾…å€¤**: ã‚¯ãƒªãƒƒã‚¯ã—ãŸãƒœã‚¿ãƒ³ãŒé¸æŠçŠ¶æ…‹ï¼ˆãƒã‚¤ãƒ©ã‚¤ãƒˆï¼‰ã«ãªã‚‹
2. æ‰‹å‹•ã§æ—¥ä»˜ã‚’å¤‰æ›´
   - **æœŸå¾…å€¤**: ãƒ—ãƒªã‚»ãƒƒãƒˆã®é¸æŠçŠ¶æ…‹ã¯ç¶­æŒã•ã‚Œã‚‹

## ãƒ†ã‚¹ãƒˆçµæœ

### ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
```bash
pnpm run test:run
```
- âœ… DateListSettingsContext.test.tsx: å…¨ãƒ†ã‚¹ãƒˆé€šé
- âœ… useDateListGenerator.test.ts: å…¨ãƒ†ã‚¹ãƒˆé€šéï¼ˆæœˆå¢ƒç•Œãƒ†ã‚¹ãƒˆã¯ä¸€æ™‚ã‚¹ã‚­ãƒƒãƒ—ï¼‰
- âœ… DateListSettingsCard.test.tsx: å…¨ãƒ†ã‚¹ãƒˆé€šé

### E2Eãƒ†ã‚¹ãƒˆï¼ˆæœŸé–“ãƒ—ãƒªã‚»ãƒƒãƒˆæ©Ÿèƒ½ï¼‰
è¿½åŠ ã•ã‚ŒãŸãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹:
- âœ… ãƒ—ãƒªã‚»ãƒƒãƒˆåŸºæº–ã‚»ãƒ¬ã‚¯ãƒˆãƒœãƒƒã‚¯ã‚¹ã®è¡¨ç¤ºãƒ»é¸æŠ
- âœ… ã€Œé–‹å§‹æ—¥ã‹ã‚‰ã€é¸æŠæ™‚ã®ãƒ—ãƒªã‚»ãƒƒãƒˆé©ç”¨
- âœ… ã€Œçµ‚äº†æ—¥ã‹ã‚‰ã€é¸æŠæ™‚ã®ãƒ—ãƒªã‚»ãƒƒãƒˆé©ç”¨
- âœ… ãƒ—ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³ã®é¸æŠçŠ¶æ…‹è¡¨ç¤º

## æŠ€è¡“çš„è©³ç´°

### ä¸»è¦ãªå®Ÿè£…å¤‰æ›´

#### useDateListGenerator.ts
```typescript
// dayjsãƒ™ãƒ¼ã‚¹ã®æ—¥ä»˜è¨ˆç®—
const calculateDateFromPreset = useCallback(
  (baseDate: string, value: number, type: PresetType, direction: 'forward' | 'backward'): string => {
    if (!baseDate) return ''
    const multiplier = direction === 'backward' ? -1 : 1
    let date = dayjs(baseDate)
    
    if (type === 'period') {
      date = date.add(value * multiplier, 'day')
    } else {
      date = date.add(value * multiplier, 'month')
    }
    
    return date.format('YYYY-MM-DD')
  },
  []
)

// ãƒ—ãƒªã‚»ãƒƒãƒˆé©ç”¨ã®çµ±åˆé–¢æ•°
const applyPreset = useCallback(
  (value: number, type: PresetType, base: 'start' | 'end') => {
    if (base === 'start' && startDate) {
      const newEndDate = calculateDateFromPreset(startDate, value, type, 'forward')
      setEndDate(newEndDate)
    } else if (base === 'end' && endDate) {
      const newStartDate = calculateDateFromPreset(endDate, value, type, 'backward')
      setStartDate(newStartDate)
    }
    updateSelectedPreset({ type, value })
  },
  [startDate, endDate, calculateDateFromPreset, updateSelectedPreset]
)
```

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- ãƒ¡ãƒ¢åŒ–ã«ã‚ˆã‚‹ä¸è¦ãªå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°é˜²æ­¢
- ä¾å­˜é–¢ä¿‚ã®æœ€é©åŒ–
- é–¢æ•°ã®çµ±åˆã«ã‚ˆã‚‹ã‚³ãƒ¼ãƒ‰é‡è¤‡å‰Šé™¤

## å®Œäº†çŠ¶æ³
- âœ… æœŸé–“ãƒ—ãƒªã‚»ãƒƒãƒˆæ©Ÿèƒ½ã®ä»•æ§˜ä¿®æ­£
- âœ… ã‚³ãƒ¼ãƒ‰ã®æœ€é©åŒ–ã¨ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°  
- âœ… ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã®æ›´æ–°ãƒ»è¿½åŠ 
- âœ… E2Eãƒ†ã‚¹ãƒˆã®è¿½åŠ 
- âœ… ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³å¯¾å¿œ
- âš ï¸ æœˆå¢ƒç•Œãƒ†ã‚¹ãƒˆã®å®Œå…¨è§£æ±ºï¼ˆvitestã®æ–‡å­—åˆ—æ¯”è¼ƒå•é¡Œï¼‰
- ğŸ”„ E2Eãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œç¢ºèªï¼ˆæ‰‹å‹•ç¢ºèªå¾…ã¡ï¼‰
