# E2Eテスト要件定義（Playwright）

## 目的
- ユーザーがWebアプリを操作する主要なフローを自動テストし、リグレッションやUI/UXの破壊を防ぐ。
- ビルド時に自動でE2Eテストを実行し、問題があればデプロイ・リリースを停止できるようにする。

## 対象範囲
- アプリの主要ページ（トップページ、DateListGeneratorPageなど）の表示確認
- 入力フォームやボタンなど主要UIコンポーネントの動作確認
- 設定変更やリスト生成など、ユーザーが行う一連の操作フロー
- エラーハンドリングやバリデーションの確認
- レスポンシブデザイン（PC/スマホ）の基本的な動作確認

## テスト内容例
- トップページが正しく表示される
- 日付リスト生成ページで日付を入力し、リストが正しく生成される
- 設定変更（例：リスト形式や日付フォーマット）が反映される
- 入力値のバリデーション（不正な値でエラー表示）
- 主要なナビゲーション・リンクの遷移
- フッターやヘッダーの表示
- 画面幅を変えた際のレイアウト崩れがないか

---

### DateSettings/MarkdownViewer/その他ロジックに基づく追加テスト内容
- タイトル入力・バリデーション（空欄時のエラー表示含む）
- 開始日・終了日入力とバリデーション（未入力・不正値時のエラー表示）
- 期間プリセットボタン（1週間～4ヶ月）の選択・反映
- 詳細オプションの開閉・閉じた/開いた状態でのUI確認
- 日付フォーマットの入力・変更と反映
- 「休日と祝日の色を変更する」スイッチON/OFF、色の選択・入力
- 「休日（土日）をリストから除外する」スイッチON/OFF
- 「祝日（日本）をリストから除外する」スイッチON/OFF
- 「リスト生成」ボタンの有効/無効状態とクリック時の挙動（isGenerateButtonDisabledのロジック：タイトル・開始日・終了日が空の場合は非活性）
- 「リセット」ボタンのクリックで全項目が初期値に戻ること
- 生成リストのプレビュー表示・編集切替（編集→プレビュー、プレビュー→編集）
- 生成リストのコピー機能（ボタン押下でクリップボードにコピーされ、トーストが表示される）
- 編集時のマークダウンエディタの動作（入力・保存・プレビュー切替）
- 設定リセット時、全項目が初期値に戻ること
- コンテキスト（DateListSettingsContext）を通じた状態の一貫性
- 例外発生時のエラートースト表示（リスト生成・コピー時のエラー）

## 実行タイミング
- ローカル開発時に手動で実行可能
- 毎週日曜日の午前0時（JST）に定期実行され、失敗時はビルドを失敗させる
- 必要に応じて手動実行が可能

## 技術要件
- Playwright（TypeScript）を利用
- テスト用の独立した設定ファイル（例：playwright.config.ts）を用意
- テストコードは `e2e/` ディレクトリに配置
- 必要に応じてテスト用のモックやシードデータを用意

## レポート
- テスト結果は標準出力およびHTMLレポートで確認可能とする
